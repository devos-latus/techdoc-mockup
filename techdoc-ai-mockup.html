<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TechDoc AI - BAM Wonen</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    /* CSS Variables - Teams/Fluent inspired with BAM orange accent */
    :root {
      --teams-purple: #6264A7;
      --bam-orange: #E65100;
      --bam-orange-light: #FF8A50;
      --surface-primary: #FFFFFF;
      --surface-secondary: #F5F5F5;
      --surface-tertiary: #EBEBEB;
      --text-primary: #242424;
      --text-secondary: #616161;
      --text-tertiary: #8A8A8A;
      --border-color: #E0E0E0;
      --success: #107C10;
      --warning: #D83B01;
      --info: #0078D4;
      --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
      --shadow-lg: 0 8px 24px rgba(0,0,0,0.12);
      --radius-sm: 4px;
      --radius-md: 8px;
      --radius-lg: 12px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--surface-secondary);
      color: var(--text-primary);
    }

    .teams-app-container {
      min-height: 100vh;
    }

    /* Teams Notification */
    .teams-notification {
      position: fixed;
      top: 16px;
      right: 16px;
      background: white;
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-lg);
      padding: 12px 16px;
      display: flex;
      align-items: center;
      gap: 12px;
      z-index: 1000;
      animation: slideIn 0.3s ease;
      border-left: 4px solid var(--success);
    }

    .teams-notification.hidden { display: none; }

    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    .teams-notification .notification-icon { color: var(--success); }
    .teams-notification .notification-content strong { display: block; font-size: 13px; }
    .teams-notification .notification-content p { font-size: 12px; color: var(--text-secondary); margin: 0; }
    .teams-notification button { background: none; border: none; cursor: pointer; color: var(--text-tertiary); padding: 4px; }

    /* App Header */
    .app-header {
      background: linear-gradient(135deg, var(--bam-orange) 0%, var(--bam-orange-light) 100%);
      padding: 16px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: white;
    }

    .header-left { display: flex; align-items: center; gap: 12px; }
    .app-logo {
      width: 40px; height: 40px;
      background: rgba(255,255,255,0.2);
      border-radius: var(--radius-md);
      display: flex; align-items: center; justify-content: center;
    }
    .app-title h1 { font-size: 18px; font-weight: 600; letter-spacing: -0.3px; }
    .app-subtitle { font-size: 12px; opacity: 0.85; }
    .header-right { display: flex; gap: 8px; }
    .header-btn {
      background: rgba(255,255,255,0.15); border: none; color: white;
      width: 36px; height: 36px; border-radius: var(--radius-sm);
      cursor: pointer; display: flex; align-items: center; justify-content: center;
      transition: background 0.2s;
    }
    .header-btn:hover { background: rgba(255,255,255,0.25); }

    /* Breadcrumb */
    .breadcrumb {
      background: white; padding: 12px 24px;
      display: flex; align-items: center; gap: 8px;
      font-size: 13px; border-bottom: 1px solid var(--border-color);
    }
    .breadcrumb-item {
      display: flex; align-items: center; gap: 4px;
      color: var(--text-secondary); text-decoration: none;
      background: none; border: none; cursor: pointer; font-size: 13px;
    }
    .breadcrumb-item:hover { color: var(--bam-orange); }
    .breadcrumb-item.active { color: var(--text-primary); font-weight: 500; }

    /* Main Content */
    .app-main { padding: 20px 24px; }

    /* Browse View */
    .browse-view {
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 20px;
      height: calc(100vh - 160px);
    }

    .panel {
      background: white;
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--border-color);
      display: flex; flex-direction: column;
      overflow: hidden;
    }

    .panel-header { padding: 16px 20px; border-bottom: 1px solid var(--border-color); }
    .panel-header h2 { font-size: 14px; font-weight: 600; margin-bottom: 12px; }
    .search-box {
      display: flex; align-items: center; gap: 8px;
      background: var(--surface-secondary); padding: 8px 12px;
      border-radius: var(--radius-sm); border: 1px solid var(--border-color);
    }
    .search-box input { border: none; background: none; outline: none; width: 100%; font-size: 13px; }
    .search-box svg { color: var(--text-tertiary); width: 16px; height: 16px; }

    .panel-content { flex: 1; overflow-y: auto; padding: 8px 0; }

    /* Folder Tree */
    .folder-item {
      display: flex; align-items: center; gap: 4px;
      padding: 8px; cursor: pointer; transition: background 0.15s;
    }
    .folder-item:hover { background: var(--surface-secondary); }
    .expand-icon { color: var(--text-tertiary); width: 16px; }
    .folder-icon { color: var(--bam-orange); }
    .folder-name { font-size: 13px; font-weight: 500; }

    /* File Items */
    .file-item {
      display: flex; align-items: center; gap: 8px;
      padding: 10px 8px; cursor: pointer; transition: all 0.15s;
      border-radius: var(--radius-sm); margin: 2px 8px;
    }
    .file-item:hover { background: var(--surface-secondary); }
    .file-item.selected { background: rgba(230, 81, 0, 0.08); border: 1px solid var(--bam-orange); }
    .file-checkbox {
      width: 18px; height: 18px; border: 2px solid var(--border-color);
      border-radius: 3px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;
    }
    .file-item.selected .file-checkbox { background: var(--bam-orange); border-color: var(--bam-orange); color: white; }
    .file-icon { color: var(--info); flex-shrink: 0; }
    .file-info { display: flex; flex-direction: column; min-width: 0; }
    .file-name { font-size: 13px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .file-meta { font-size: 11px; color: var(--text-tertiary); }

    /* Options Panel */
    .options-panel { display: flex; flex-direction: column; }
    .section { padding: 16px 20px; border-bottom: 1px solid var(--border-color); }
    .section h3 {
      font-size: 13px; font-weight: 600; margin-bottom: 12px;
      color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.5px;
    }
    .empty-state { text-align: center; padding: 24px; color: var(--text-tertiary); }
    .empty-state svg { margin-bottom: 8px; opacity: 0.5; }
    .empty-state p { font-size: 13px; }
    .selected-list { display: flex; flex-direction: column; gap: 6px; }
    .selected-file {
      display: flex; align-items: center; gap: 8px;
      padding: 8px 10px; background: var(--surface-secondary);
      border-radius: var(--radius-sm); font-size: 12px;
    }
    .selected-file span { flex: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .selected-file button { background: none; border: none; cursor: pointer; color: var(--text-tertiary); padding: 2px; }
    .selected-file button:hover { color: var(--warning); }

    /* Analysis Options */
    .options-grid { display: flex; flex-direction: column; gap: 8px; }
    .option-card {
      display: flex; align-items: flex-start; gap: 12px;
      padding: 12px; border: 1px solid var(--border-color);
      border-radius: var(--radius-md); cursor: pointer; transition: all 0.15s;
    }
    .option-card:hover { border-color: var(--bam-orange); background: rgba(230, 81, 0, 0.02); }
    .option-card.selected { border-color: var(--bam-orange); background: rgba(230, 81, 0, 0.05); }
    .option-checkbox {
      width: 20px; height: 20px; border: 2px solid var(--border-color);
      border-radius: 4px; display: flex; align-items: center; justify-content: center;
      flex-shrink: 0; margin-top: 2px;
    }
    .option-card.selected .option-checkbox { background: var(--bam-orange); border-color: var(--bam-orange); color: white; }
    .option-icon { color: var(--bam-orange); flex-shrink: 0; }
    .option-info { display: flex; flex-direction: column; gap: 2px; }
    .option-info strong { font-size: 13px; }
    .option-info span { font-size: 11px; color: var(--text-secondary); }

    /* Action Section */
    .action-section { padding: 20px; margin-top: auto; }
    .analyze-btn {
      width: 100%; padding: 14px 20px;
      background: linear-gradient(135deg, var(--bam-orange) 0%, var(--bam-orange-light) 100%);
      color: white; border: none; border-radius: var(--radius-md);
      font-size: 14px; font-weight: 600; cursor: pointer;
      display: flex; align-items: center; justify-content: center; gap: 8px;
      transition: all 0.2s; box-shadow: 0 2px 8px rgba(230, 81, 0, 0.3);
    }
    .analyze-btn:hover:not(:disabled) { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(230, 81, 0, 0.4); }
    .analyze-btn:disabled { background: var(--surface-tertiary); color: var(--text-tertiary); cursor: not-allowed; box-shadow: none; }
    .estimate { text-align: center; font-size: 11px; color: var(--text-tertiary); margin-top: 8px; }

    /* Analyzing View */
    .analyzing-view { display: none; align-items: center; justify-content: center; min-height: calc(100vh - 200px); }
    .analyzing-view.active { display: flex; }
    .browse-view.hidden { display: none; }
    .results-view.hidden { display: none; }
    .analyzing-card {
      background: white; border-radius: var(--radius-lg);
      padding: 48px 64px; text-align: center; box-shadow: var(--shadow-md); max-width: 500px;
    }
    .analyzing-animation { margin-bottom: 24px; }
    .spinner { color: var(--bam-orange); animation: spin 1s linear infinite; }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    .analyzing-card h2 { font-size: 20px; margin-bottom: 24px; }
    .progress-container { display: flex; align-items: center; gap: 12px; margin-bottom: 32px; }
    .progress-bar { flex: 1; height: 8px; background: var(--surface-tertiary); border-radius: 4px; overflow: hidden; }
    .progress-fill { height: 100%; background: linear-gradient(90deg, var(--bam-orange), var(--bam-orange-light)); transition: width 0.3s ease; width: 0%; }
    .progress-text { font-size: 14px; font-weight: 600; color: var(--bam-orange); min-width: 45px; }
    .analyzing-steps { text-align: left; }
    .step { display: flex; align-items: center; gap: 12px; padding: 8px 0; color: var(--text-tertiary); font-size: 13px; }
    .step svg { opacity: 0.3; }
    .step.active { color: var(--text-primary); }
    .step.active svg { opacity: 1; color: var(--bam-orange); }
    .step.done { color: var(--success); }
    .step.done svg { color: var(--success); }

    /* Results View */
    .results-view { max-width: 900px; margin: 0 auto; }
    .results-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
    .results-title { display: flex; align-items: center; gap: 12px; }
    .success-icon { color: var(--success); }
    .results-title h2 { font-size: 20px; }
    .results-title span { font-size: 13px; color: var(--text-secondary); }
    .results-meta { display: flex; align-items: center; gap: 6px; font-size: 12px; color: var(--text-tertiary); }
    .results-summary { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 24px; }
    .summary-card {
      background: white; border-radius: var(--radius-md); padding: 20px;
      display: flex; align-items: center; gap: 16px;
      box-shadow: var(--shadow-sm); border: 1px solid var(--border-color);
    }
    .summary-icon { width: 48px; height: 48px; border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; }
    .summary-icon.compliance { background: rgba(16, 124, 16, 0.1); color: var(--success); }
    .summary-icon.elements { background: rgba(0, 120, 212, 0.1); color: var(--info); }
    .summary-icon.gaps { background: rgba(216, 59, 1, 0.1); color: var(--warning); }
    .summary-content { display: flex; flex-direction: column; }
    .summary-value { font-size: 28px; font-weight: 700; line-height: 1; }
    .summary-label { font-size: 12px; color: var(--text-secondary); margin-top: 4px; }
    .report-preview { background: white; border-radius: var(--radius-lg); padding: 24px; box-shadow: var(--shadow-sm); border: 1px solid var(--border-color); margin-bottom: 24px; }
    .report-preview h3 { font-size: 14px; font-weight: 600; margin-bottom: 16px; color: var(--text-secondary); }
    .report-content { border: 1px solid var(--border-color); border-radius: var(--radius-md); overflow: hidden; }
    .report-section { padding: 16px 20px; border-bottom: 1px solid var(--border-color); }
    .report-section:last-child { border-bottom: none; }
    .report-section h4 { font-size: 14px; margin-bottom: 8px; }
    .report-section p { font-size: 13px; color: var(--text-secondary); line-height: 1.6; }
    .element-tags { display: flex; flex-wrap: wrap; gap: 8px; }
    .tag { padding: 4px 12px; background: var(--surface-secondary); border-radius: 20px; font-size: 12px; color: var(--text-secondary); }
    .gaps-list { font-size: 13px; color: var(--text-secondary); padding-left: 20px; }
    .gaps-list li { margin-bottom: 6px; }
    .results-actions { display: flex; gap: 12px; justify-content: center; }
    .action-btn {
      padding: 12px 24px; border-radius: var(--radius-md);
      font-size: 14px; font-weight: 500; cursor: pointer;
      display: flex; align-items: center; gap: 8px; transition: all 0.2s;
    }
    .action-btn.primary {
      background: linear-gradient(135deg, var(--bam-orange) 0%, var(--bam-orange-light) 100%);
      color: white; border: none; box-shadow: 0 2px 8px rgba(230, 81, 0, 0.3);
    }
    .action-btn.primary:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(230, 81, 0, 0.4); }
    .action-btn.secondary { background: white; color: var(--bam-orange); border: 1px solid var(--bam-orange); }
    .action-btn.secondary:hover { background: rgba(230, 81, 0, 0.05); }
    .action-btn.tertiary { background: var(--surface-secondary); color: var(--text-secondary); border: 1px solid var(--border-color); }
    .action-btn.tertiary:hover { background: var(--surface-tertiary); }

    /* Icon sizing helper */
    .icon-sm { width: 14px; height: 14px; }
    .icon-md { width: 16px; height: 16px; }
    .icon-lg { width: 18px; height: 18px; }
    .icon-xl { width: 20px; height: 20px; }
    .icon-xxl { width: 24px; height: 24px; }
    .icon-huge { width: 28px; height: 28px; }
    .icon-spinner { width: 64px; height: 64px; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    // Mock SharePoint folder structure
    const mockFolders = [
      {
        id: "1",
        name: "Projecten",
        isRoot: true,
        children: [
          {
            id: "1-1",
            name: "Strandeiland",
            children: [
              { id: "1-1-1", name: "Technische Omschrijving", files: [
                { id: "f1", name: "TO_Strandeiland_Fase1.pdf", pages: 67, date: "2024-11-15" },
                { id: "f2", name: "TO_Strandeiland_Fase2.pdf", pages: 54, date: "2024-10-22" },
              ]},
            ]
          },
          {
            id: "1-2",
            name: "Parkstad Zuid",
            children: [
              { id: "1-2-1", name: "Technische Omschrijving", files: [
                { id: "f4", name: "TO_Parkstad_Zuid_Fase3.pdf", pages: 78, date: "2024-08-14" },
              ]},
            ]
          },
          {
            id: "1-3",
            name: "MWKZ",
            children: [
              { id: "1-3-1", name: "Documenten", files: [
                { id: "f5", name: "Uitgangspuntenlijst_MWKZ.xlsx", pages: 8, date: "2021-07-19" },
                { id: "f6", name: "Technische_Specificaties.pdf", pages: 42, date: "2024-06-20" },
              ]},
            ]
          },
          {
            id: "1-4",
            name: "Zuidpunt",
            children: [
              { id: "1-4-1", name: "Technische Omschrijving", files: [
                { id: "f7", name: "TO_Zuidpunt_Complete.pdf", pages: 89, date: "2024-05-30" },
              ]},
            ]
          },
        ]
      },
    ];

    const analysisOptions = [
      { id: "compliance", name: "Compliance Check", description: "Controleer tegen Bouwbesluit & kwaliteitseisen", color: "#107C10" },
      { id: "elements", name: "Element Extractie", description: "Extraheer bouw-elementen (Beton, Metselwerk, Isolatie)", color: "#0078D4" },
      { id: "gaps", name: "Gap Analyse", description: "Identificeer ontbrekende specificaties", color: "#D83B01" },
    ];

    // Icon component using Lucide
    function Icon({ name, className = "" }) {
      const iconRef = React.useRef(null);
      
      useEffect(() => {
        if (iconRef.current && lucide.icons[name]) {
          iconRef.current.innerHTML = '';
          const svg = lucide.icons[name].toSvg();
          iconRef.current.innerHTML = svg;
        }
      }, [name]);
      
      return <span ref={iconRef} className={className} style={{ display: 'inline-flex', alignItems: 'center' }}></span>;
    }

    // Folder Tree Component  
    function FolderTree({ items, level = 0, onFileSelect, selectedFiles }) {
      const [expanded, setExpanded] = useState(level === 0 ? { "1": true } : {});

      const toggleExpand = (id) => setExpanded(prev => ({ ...prev, [id]: !prev[id] }));

      return (
        <div className="folder-tree">
          {items.map(item => (
            <div key={item.id}>
              {item.children && (
                <div 
                  className="folder-item"
                  style={{ paddingLeft: `${level * 16 + 8}px` }}
                  onClick={() => toggleExpand(item.id)}
                >
                  <span className="expand-icon">
                    <Icon name={expanded[item.id] ? "chevron-down" : "chevron-right"} className="icon-md" />
                  </span>
                  <Icon name={item.isRoot ? "building-2" : "folder"} className="icon-md folder-icon" />
                  <span className="folder-name">{item.name}</span>
                </div>
              )}
              
              {expanded[item.id] && item.children && (
                <FolderTree 
                  items={item.children} 
                  level={level + 1}
                  onFileSelect={onFileSelect}
                  selectedFiles={selectedFiles}
                />
              )}
              
              {expanded[item.id] && item.files && (
                <div className="files-list">
                  {item.files.map(file => (
                    <div 
                      key={file.id}
                      className={`file-item ${selectedFiles.includes(file.id) ? 'selected' : ''}`}
                      style={{ paddingLeft: `${(level + 1) * 16 + 8}px` }}
                      onClick={() => onFileSelect(file)}
                    >
                      <div className="file-checkbox">
                        {selectedFiles.includes(file.id) && <Icon name="check" className="icon-sm" />}
                      </div>
                      <Icon name="file-text" className="icon-md file-icon" />
                      <div className="file-info">
                        <span className="file-name">{file.name}</span>
                        <span className="file-meta">{file.pages} pagina's ‚Ä¢ {file.date}</span>
                      </div>
                    </div>
                  ))}
                </div>
              )}
            </div>
          ))}
        </div>
      );
    }

    // Main App Component
    function App() {
      const [currentView, setCurrentView] = useState("browse");
      const [selectedFiles, setSelectedFiles] = useState([]);
      const [selectedFileDetails, setSelectedFileDetails] = useState([]);
      const [selectedAnalysis, setSelectedAnalysis] = useState([]);
      const [progress, setProgress] = useState(0);
      const [showNotification, setShowNotification] = useState(false);

      const handleFileSelect = (file) => {
        if (selectedFiles.includes(file.id)) {
          setSelectedFiles(prev => prev.filter(id => id !== file.id));
          setSelectedFileDetails(prev => prev.filter(f => f.id !== file.id));
        } else {
          setSelectedFiles(prev => [...prev, file.id]);
          setSelectedFileDetails(prev => [...prev, file]);
        }
      };

      const handleAnalysisSelect = (analysisId) => {
        if (selectedAnalysis.includes(analysisId)) {
          setSelectedAnalysis(prev => prev.filter(id => id !== analysisId));
        } else {
          setSelectedAnalysis(prev => [...prev, analysisId]);
        }
      };

      const startAnalysis = () => {
        setCurrentView("analyzing");
        setProgress(0);
        
        const interval = setInterval(() => {
          setProgress(prev => {
            if (prev >= 100) {
              clearInterval(interval);
              setShowNotification(true);
              setTimeout(() => setCurrentView("results"), 1500);
              return 100;
            }
            return prev + Math.random() * 15;
          });
        }, 800);
      };

      const resetApp = () => {
        setCurrentView("browse");
        setSelectedFiles([]);
        setSelectedFileDetails([]);
        setSelectedAnalysis([]);
        setProgress(0);
        setShowNotification(false);
      };

      return (
        <div className="teams-app-container">
          {/* Teams Notification Toast */}
          <div className={`teams-notification ${showNotification ? '' : 'hidden'}`}>
            <div className="notification-icon">
              <Icon name="check-circle" className="icon-xl" />
            </div>
            <div className="notification-content">
              <strong>TechDoc AI</strong>
              <p>Analyse voltooid! Bekijk je rapport.</p>
            </div>
            <button onClick={() => setShowNotification(false)}>
              <Icon name="x" className="icon-md" />
            </button>
          </div>

          {/* App Header */}
          <header className="app-header">
            <div className="header-left">
              <div className="app-logo">
                <Icon name="file-search" className="icon-xxl" />
              </div>
              <div className="app-title">
                <h1>TechDoc AI</h1>
                <span className="app-subtitle">Slimme Document Analyse</span>
              </div>
            </div>
            <div className="header-right">
              <button className="header-btn" title="Instellingen">
                <Icon name="settings" className="icon-lg" />
              </button>
              <button className="header-btn" title="Help">
                <Icon name="help-circle" className="icon-lg" />
              </button>
            </div>
          </header>

          {/* Breadcrumb */}
          <div className="breadcrumb">
            <button onClick={resetApp} className="breadcrumb-item">
              <Icon name="home" className="icon-sm" />
              <span>Home</span>
            </button>
            {currentView !== "browse" && (
              <>
                <Icon name="chevron-right" className="icon-sm" />
                <span className="breadcrumb-item active">
                  {currentView === "analyzing" ? "Analyse" : "Resultaten"}
                </span>
              </>
            )}
          </div>

          {/* Main Content */}
          <main className="app-main">
            {/* Browse View */}
            <div className={`browse-view ${currentView !== 'browse' ? 'hidden' : ''}`}>
              <div className="panel file-browser">
                <div className="panel-header">
                  <h2>SharePoint Documenten</h2>
                  <div className="search-box">
                    <Icon name="search" className="icon-md" />
                    <input type="text" placeholder="Zoek documenten..." />
                  </div>
                </div>
                <div className="panel-content">
                  <FolderTree 
                    items={mockFolders}
                    onFileSelect={handleFileSelect}
                    selectedFiles={selectedFiles}
                  />
                </div>
              </div>

              <div className="panel options-panel">
                <div className="section selected-docs">
                  <h3>Geselecteerde Documenten</h3>
                  {selectedFileDetails.length === 0 ? (
                    <div className="empty-state">
                      <Icon name="file-text" className="icon-xxl" />
                      <p>Selecteer documenten uit de mappenstructuur</p>
                    </div>
                  ) : (
                    <div className="selected-list">
                      {selectedFileDetails.map(file => (
                        <div key={file.id} className="selected-file">
                          <Icon name="file-text" className="icon-md" style={{color: 'var(--info)'}} />
                          <span>{file.name}</span>
                          <button onClick={() => handleFileSelect(file)}>
                            <Icon name="x" className="icon-sm" />
                          </button>
                        </div>
                      ))}
                    </div>
                  )}
                </div>

                <div className="section analysis-options">
                  <h3>Analyse Type</h3>
                  <div className="options-grid">
                    {analysisOptions.map(option => (
                      <div 
                        key={option.id}
                        className={`option-card ${selectedAnalysis.includes(option.id) ? 'selected' : ''}`}
                        onClick={() => handleAnalysisSelect(option.id)}
                      >
                        <div className="option-checkbox">
                          {selectedAnalysis.includes(option.id) && <Icon name="check" className="icon-sm" />}
                        </div>
                        <Icon 
                          name={option.id === 'compliance' ? 'check-circle' : option.id === 'elements' ? 'file-search' : 'alert-circle'} 
                          className="icon-xxl option-icon" 
                          style={{color: option.color}}
                        />
                        <div className="option-info">
                          <strong>{option.name}</strong>
                          <span>{option.description}</span>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>

                <div className="action-section">
                  <button 
                    className="analyze-btn"
                    disabled={selectedFiles.length === 0 || selectedAnalysis.length === 0}
                    onClick={startAnalysis}
                  >
                    <Icon name="file-search" className="icon-xl" />
                    Analyseer {selectedFiles.length > 0 && `(${selectedFiles.length} document${selectedFiles.length > 1 ? 'en' : ''})`}
                  </button>
                  <p className="estimate">
                    Geschatte tijd: {Math.max(60, selectedFiles.length * 30)}-{Math.max(90, selectedFiles.length * 45)} seconden
                  </p>
                </div>
              </div>
            </div>

            {/* Analyzing View */}
            <div className={`analyzing-view ${currentView === 'analyzing' ? 'active' : ''}`}>
              <div className="analyzing-card">
                <div className="analyzing-animation">
                  <Icon name="loader-2" className="icon-spinner spinner" />
                </div>
                <h2>Document Analyse Bezig...</h2>
                <div className="progress-container">
                  <div className="progress-bar">
                    <div className="progress-fill" style={{ width: `${Math.min(progress, 100)}%` }} />
                  </div>
                  <span className="progress-text">{Math.round(Math.min(progress, 100))}%</span>
                </div>
                <div className="analyzing-steps">
                  <div className={`step ${progress > 10 ? 'active' : ''} ${progress > 30 ? 'done' : ''}`}>
                    <Icon name="check" className="icon-md" />
                    <span>Document(en) laden</span>
                  </div>
                  <div className={`step ${progress > 30 ? 'active' : ''} ${progress > 60 ? 'done' : ''}`}>
                    <Icon name="check" className="icon-md" />
                    <span>OCR & Tekst extractie</span>
                  </div>
                  <div className={`step ${progress > 60 ? 'active' : ''} ${progress > 90 ? 'done' : ''}`}>
                    <Icon name="check" className="icon-md" />
                    <span>AI Analyse uitvoeren</span>
                  </div>
                  <div className={`step ${progress >= 100 ? 'active done' : ''}`}>
                    <Icon name="check" className="icon-md" />
                    <span>Rapport genereren</span>
                  </div>
                </div>
              </div>
            </div>

            {/* Results View */}
            <div className={`results-view ${currentView !== 'results' ? 'hidden' : ''}`}>
              <div className="results-header">
                <div className="results-title">
                  <Icon name="check-circle" className="icon-huge success-icon" />
                  <div>
                    <h2>Analyse Voltooid</h2>
                    <span>{selectedFileDetails.length} document(en) geanalyseerd</span>
                  </div>
                </div>
                <div className="results-meta">
                  <Icon name="clock" className="icon-sm" />
                  <span>Analyse duur: 1m 23s</span>
                </div>
              </div>

              <div className="results-summary">
                <div className="summary-card">
                  <div className="summary-icon compliance">
                    <Icon name="check-circle" className="icon-xxl" />
                  </div>
                  <div className="summary-content">
                    <span className="summary-value">94%</span>
                    <span className="summary-label">Compliance Score</span>
                  </div>
                </div>
                <div className="summary-card">
                  <div className="summary-icon elements">
                    <Icon name="file-search" className="icon-xxl" />
                  </div>
                  <div className="summary-content">
                    <span className="summary-value">47</span>
                    <span className="summary-label">Elementen Gevonden</span>
                  </div>
                </div>
                <div className="summary-card">
                  <div className="summary-icon gaps">
                    <Icon name="alert-circle" className="icon-xxl" />
                  </div>
                  <div className="summary-content">
                    <span className="summary-value">12</span>
                    <span className="summary-label">Gaps Ge√Ødentificeerd</span>
                  </div>
                </div>
              </div>

              <div className="report-preview">
                <h3>Rapport Preview</h3>
                <div className="report-content">
                  <div className="report-section">
                    <h4>üìã Samenvatting</h4>
                    <p>De geanalyseerde technische omschrijving bevat specificaties voor 47 bouw-elementen. 
                    De compliance score van 94% geeft aan dat het document grotendeels voldoet aan de 
                    Bouwbesluit eisen, met 12 aandachtspunten die handmatige controle vereisen.</p>
                  </div>
                  <div className="report-section">
                    <h4>üèóÔ∏è Gevonden Elementen</h4>
                    <div className="element-tags">
                      <span className="tag">Beton (14)</span>
                      <span className="tag">Metselwerk (8)</span>
                      <span className="tag">Isolatie (11)</span>
                      <span className="tag">Kozijnen (6)</span>
                      <span className="tag">Dak (5)</span>
                      <span className="tag">Overig (3)</span>
                    </div>
                  </div>
                  <div className="report-section">
                    <h4>‚ö†Ô∏è Aandachtspunten</h4>
                    <ul className="gaps-list">
                      <li>Rc-waarde isolatie niet gespecificeerd (sectie 4.2)</li>
                      <li>Brandwerendheid niet vermeld voor draagconstructie</li>
                      <li>Akoestische eisen ontbreken bij scheidingswanden</li>
                    </ul>
                  </div>
                </div>
              </div>

              <div className="results-actions">
                <button className="action-btn primary">
                  <Icon name="download" className="icon-lg" />
                  Download Rapport
                </button>
                <button className="action-btn secondary">
                  <Icon name="share-2" className="icon-lg" />
                  Deel met Team
                </button>
                <button className="action-btn tertiary" onClick={resetApp}>
                  <Icon name="refresh-cw" className="icon-lg" />
                  Nieuwe Analyse
                </button>
              </div>
            </div>
          </main>
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
